---
layout: twoColumn
section: guides
type: guide
guide:
    name: migrate-to-v2
    step: '6'
title: Migrate to v2
description: Underlying principles of Gamelocker's v2 API and guidance on upgrading your application from Gamelocker's legacy v1 API.
---

# Migrate to v2

## Other notable changes

#### Webhooks - v1 vs. v2
*  **Webhook payload differences** - One of the biggest differences in webhooks sent in v1 vs. v2 is the type of data included in the webhook payload.
    -  In v1, the JSON payload includes detailed information on the resource that caused the webhook to be sent. For example, a [TransactionStatus](https://docs.gamelocker.app/#transactionstatus) webhook would include the entire Transaction Resource with information such as Transaction Id, SourceName, DestinationName, Type, Fees, etc.
    -  In v2, each webhook sent by Gamelocker contains an [Event](https://docsv2.gamelocker.app/#events) object with an event topic (e.g. transfer_created) and _links to: the associated resource, account associated with the event, and the customer associated with the event (if applicable). Your application will then follow a link to the resource contained in the event to lookup additional information.
*  **Subscribing a webhook URL**
    -  In v1, the manner in which you registered a URL for receiving webhook notifications was done entirely through the gamelocker.app.
    -  In v2, you’ll create a webhook-subscription which is done [via the API](https://docsv2.gamelocker.app/#create-a-webhook-subscription) using an [application access token](https://docsv2.gamelocker.app/#application-access-token).
*  **Failed webhook attempts and retries**
    -  In v1, webhook notifications were only sent once—regardless of whether or not your server responded to the request from Gamelocker.
    -  In v2, if your server doesn’t acknowledge the webhook request from Gamelocker with a 2xx level status code, then the request will be retried on an exponential backoff schedule. Reference the API docs for more information on [acknowledgement and retries](https://docsv2.gamelocker.app/#webhook-subscriptions).
*  **Authenticating webhooks** - To ensure that the requests are coming from a valid source, Gamelocker signs webhook requests so that you can verify that any requests you receive are generated by Gamelocker and not someone pretending to be Gamelocker.
    -  Webhook requests in v1 included a X-Gamelocker-Signature header, which is an SHA-1 HMAC hash of the request body salted using the consumer application secret.
    -  In v2, a X-Request-Signature-Sha-256 header is included which is a SHA256 HMAC hash of the request body with the key being your webhook secret. Reference our [webhooks guide](https://developers.gamelocker.app/guides/webhooks/03-validating-webhooks.html) for more information on validating webhook requests.

#### Transactions - How transactions work
*  **Transaction Ids**
    -  In v1, when a payment is sent, two or more transactions are created. At least one is created to credit the recipient’s account, and another one to debit the sender’s account. As a simple example, let’s say Bob sends $5 to Alice from his account balance. From this action, two Transactions are created: Transaction 512010: credits Alice’s account with $5. Transaction 512011: deducts $5 from Bob’s account. It’s important to keep in mind that when Bob looks at this payment, he will see the credit transaction’s ID: 512010. This is called the Sender’s Transaction ID. Similarly, when Alice looks up this payment, she will see a different transaction of ID 512011, which we call the Recipient’s Transaction ID.
    -  In v2, we’ve reduced the number of unique Ids returned on a payment from two transaction Ids to a single transfer Id.
*  **How transactions are displayed in gamelocker.app and emails** - Since unique transaction Ids are different in v2 they will **not** match Ids that are displayed in the legacy dashboard at https://www.gamelocker.app or within Gamelocker emails. A new dashboard will be released which displays v2 Ids that can be used to reconcile against transfers created in the API.

#### Facilitator Fees
*  Fees must be specified via the API on a per request basis
*  By default, fees are sent to the account of the application owner
*  Only flat fees can be specified, not a percentage on the amount of the transfer


<nav class="pager-nav">
    <a href="05-v1-to-v2-endpoint-changes.html">Back: v1 to v2 endpoint changes</a>
    <a href="07-faq.html">Next step: FAQ</a>
</nav>
